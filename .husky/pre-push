#!/bin/sh
. "$(dirname -- "$0")/_/husky.sh"

# 檢查是否推送到 master 分支
while read local_ref local_sha remote_ref remote_sha
do
    if [[ "$remote_ref" == "refs/heads/master" ]]; then
        echo "正在推送到 master 分支..."
        
        # 執行類型檢查
        echo "執行類型檢查..."
        pnpm run type-check
        if [ $? -ne 0 ]; then
            echo "類型檢查失敗，取消推送！"
            exit 1
        fi
        
        echo "所有檢查通過，允許推送到 master 分支"
    fi
done
